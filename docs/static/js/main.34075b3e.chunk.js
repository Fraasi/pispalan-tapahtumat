(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e){e.exports={name:"tapahtumat",author:"fraasi <fraasi.gh@gmail.com> (https://fraasi.github.io)",version:"0.5.0",private:!0,homepage:".",scripts:{start:"react-scripts start",build:"react-scripts build",postbuild:"rm -rf docs && cp -r build/ docs && rm -rf build",test:"react-scripts test",eject:"react-scripts eject"},eslintConfig:{extends:"react-app"},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]},dependencies:{leaflet:"^1.5.1","mongodb-stitch-browser-sdk":"^4.5.0",react:"^16.8.6","react-dom":"^16.8.6","react-leaflet":"^2.4.0","react-materialize":"^3.3.3","react-scripts":"3.0.1"},devDependencies:{cheerio:"^1.0.0-rc.3","date-fns":"^1.30.1","eslint-plugin-react":"^7.14.3","node-fetch":"^2.6.0"}}},24:function(e,t,a){e.exports=a(83)},29:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),i=(a(29),a(9)),c=a(6),s=(a(76),function(e){var t=e.data,a=t.name,n=t.url,l=t.events;if(e.showOnlyPispalaVenues&&["dogs_home","maanalainen","visit_tampere","huurupiilo"].includes(a))return null;var o=function(){};if(l.error_msg)return r.a.createElement(c.CollapsibleItem,{header:"".concat(l.error_title," (").concat(a,") *!*!*"),onSelect:o},r.a.createElement("span",{className:"sub-header"},"K\xe4yh\xe4n nettisivuilla\xa0",r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",{key:"error"},l.error_msg)));"vastavirta"===a&&(l=l.slice(0,10));var i="".concat(a.charAt(0).toUpperCase()).concat(a.slice(1)).replace(/_/g," "),s=new Date,u=s.getDate(),m=s.getMonth(),p=!1,d=l.sort(function(e,t){return e.startTimeStamp<t.startTimeStamp?-1:1}).filter(function(e){var t=e.startTimeStamp,a=e.endTimeStamp;if(a){var n=new Date(a),r=n.getDate(),l=n.getMonth();return!(r<u&&l<=m)}var o=new Date(t),i=o.getDate(),c=o.getMonth();return!(i<u&&c<=m)}),h=d.map(function(e,t){var a=e.startTimeStamp,n=e.endTimeStamp,l=e.event,o=new Date(a),i="";if(n){var c=new Date(n);i="\u2013".concat(c.getDate(),".").concat(c.getMonth()+1)}var s="".concat(o.getDate(),".").concat(o.getMonth()+1).concat(i),d=o.getDate()===u&&o.getMonth()===m;d&&(p=!0);var h=d?"rgba(39,169,157,0.7)":"";return r.a.createElement("tr",{key:t,style:{backgroundColor:h}},r.a.createElement("td",null,s),r.a.createElement("td",null,"\u2014"),r.a.createElement("td",null,l))});return r.a.createElement(c.CollapsibleItem,{header:"".concat(i," (").concat(d.length,") ").concat(p?"!":""),onSelect:o},r.a.createElement("span",{className:"sub-header"},"Aukioloajat & tarkemmat tiedot ",r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n)),"hirvitalo"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"sub-header"},"Kansankeitti\xf6 lauantaisin ",r.a.createElement("a",{href:"https://www.facebook.com/groups/294496307351291/",target:"_blank",rel:"noopener noreferrer"},"https://www.facebook.com/groups/294496307351291/"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("tbody",null,h)))}),u=(a(77),function(){return r.a.createElement(c.Modal,{options:{onOpenEnd:function(){window.dataLayer.push({event:"map_modal_opened"})}},actions:r.a.createElement(c.Button,{waves:"green",modal:"close",style:{position:"absolute",top:"5px",right:"5px"}},"X"),trigger:r.a.createElement("a",{href:"#",title:"Kartalla",style:{}},"Paikat kartalla (ty\xf6n alla)")},r.a.createElement("div",{id:"map"}))}),m=a(22),p=(a(78),function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"burger-container",className:"".concat(a?"open":""),onClick:function(){a||window.dataLayer.push({event:"about_modal_opened"}),l(function(e){return!e})}},r.a.createElement("div",{id:"burger"},r.a.createElement("span",null,"\xa0"),r.a.createElement("span",null,"\xa0"),r.a.createElement("span",null,"\xa0"))),r.a.createElement("div",{className:"menu".concat(a?" open":"")},r.a.createElement("div",{className:"menu-content"},r.a.createElement("h5",null,"Pispalan tapahtumat (v",m.version,")"),r.a.createElement("p",null,"Pispalan harjun tapahtumat yhdell\xe4 sivustolla."),r.a.createElement("p",null,r.a.createElement("strong",null,"Vinkki: "),"T\xe4m\xe4 nettisivu (",r.a.createElement("a",{href:"https://fraasi.github.io/pispalan-tapahtumat/",target:"_blank",rel:"noopener noreferrer"},"https://fraasi.github.io/pispalan-tapahtumat/"),") on suunniteltu k\xe4nnyk\xe4lle ja toimii parhaiten kun avaa nettisivun luurin selaimessa ja valitsee asetuksista 'Add to home screen', jolloin l\xe4ht\xf6ruudulle napsahtaa kuvake jota klikkaamalla sivu toimii kuten muutkin '\xe4pit'."),r.a.createElement("p",null,r.a.createElement("strong",null,"Huom: "),"P\xe4iv\xe4m\xe4\xe4rien kanssa ty\xf6skentely on kutakuinkin vaikeaa, joten jotain erheit\xe4 on odotettavissa. Korjailen niit\xe4 sit\xe4 mukaa kun niit\xe4 ilmenee ja aika antaa my\xf6ten."),r.a.createElement("p",null,"Jos sivulta l\xf6ytyy virheit\xe4 tai on jotain muuta valitettavaa tai haluat ehdottaa jotain paikkaa listalle, s\xe4hk\xf6postia voi l\xe4hett\xe4\xe4 osoitteeseen ",r.a.createElement("a",{href:"mailto:fraasi.gh@gmail.com"},"fraasi.gh@gmail.com")),r.a.createElement(u,null))))}),d=(a(79),a(14)),h=d.c.initializeDefaultAppClient("tapahtumat-api-lffsa"),f=h.getServiceClient(d.b.factory,"mongodb-atlas").db("tapahtumat");var v=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(null),u=Object(i.a)(o,2),m=u[0],v=u[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),g=E[0],k=E[1],w=Object(n.useState)(!0),y=Object(i.a)(w,2),j=y[0],S=y[1];Object(n.useEffect)(function(){document.querySelector(".switch").title="Avaa/sulje kaikki",h.auth.loginWithCredential(new d.a).then(function(e){return f.collection("pispala").find({},{data:1,_id:0}).asArray()}).then(function(e){console.log("docs:",e);var t=e[0].data;l(function(){return t}),console.log("data",t)}).catch(function(e){console.error("Data fetch error:",e),v(function(){return e})})},[]);var _=null,D=function(){clearTimeout(_),_=setTimeout(function(){S(function(e){return!e})},5e3)},C=function(){clearTimeout(_)};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"title",onMouseDown:D,onMouseUp:C,onTouchStart:D,onTouchEnd:C,onContextMenu:function(e){return e.preventDefault()}},"Pispalan Tapahtumat"),r.a.createElement(c.Switch,{offLabel:"",onLabel:"",onChange:function(){k(function(e){return!e}),g?document.querySelector(".collapsible.expandable").M_Collapsible.close():document.querySelector(".collapsible.expandable").M_Collapsible.open()}}),r.a.createElement(p,null)),null!==m?r.a.createElement("div",{className:"error-loader"},m.toString()):null===a?r.a.createElement("div",{className:"error-loader"},"Haetaan tapahtumia...",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.Preloader,{size:"small",flashing:!0})):r.a.createElement(c.Collapsible,{accordion:!1},a.events_data.sort(function(e,t){return e.name<t.name?-1:1}).map(function(e,t){return r.a.createElement(s,{data:e,key:e.name,showOnlyPispalaVenues:j})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.34075b3e.chunk.js.map