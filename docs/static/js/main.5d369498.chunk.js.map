{"version":3,"sources":["components/Event/index.js","components/About/index.js","App.js","serviceWorker.js","index.js"],"names":["Event","props","_props$data","data","name","url","events","onTitleClick","e","error_msg","react_default","a","createElement","lib","header","concat","error_title","onSelect","className","href","target","rel","key","slice","cleanedName","charAt","toUpperCase","replace","length","map","event","i","date","Date","startTimeStamp","dateParsed","preStartTimeStamp","getDate","getMonth","emdash","padStart","padEnd","About","actions","waves","modal","trigger","style","top","left","position","title","client","Stitch","initializeDefaultAppClient","db","getServiceClient","RemoteMongoClient","factory","App","_useState","useState","_useState2","Object","slicedToArray","setData","_useState3","_useState4","errorMsg","setErrorMsg","_useState5","_useState6","expanded","setExpanded","useEffect","document","querySelector","auth","loginWithCredential","AnonymousCredential","then","user","collection","find","_id","asArray","docs","returnData","sort","first","second","console","log","catch","err","error","components_About","offLabel","onLabel","onChange","prev","M_Collapsible","close","open","toString","size","flashing","accordion","el","components_Event","Boolean","window","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5d369498.chunk.js","sourcesContent":["import React from 'react'\r\nimport { CollapsibleItem } from 'react-materialize'\r\nimport './event.css'\r\n\r\nconst Event = (props) => {\r\n\r\n  let { name, url, events } = props.data\r\n\r\n  // onSelect is not a function error without this\r\n  const onTitleClick = (e) => { }\r\n\r\n  if (events.error_msg) {\r\n    return (\r\n      <CollapsibleItem\r\n        header={`${events.error_title} (${name}) *!*!*`}\r\n        onSelect={onTitleClick}\r\n      >\r\n        <span className=\"sub-header\">Käyhän nettisivuilla&nbsp;<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a></span><br /><br />\r\n        <ul>\r\n          {\r\n            <li key={'error'}>\r\n              {events.error_msg}\r\n            </li>\r\n          }\r\n        </ul>\r\n      </CollapsibleItem>\r\n    )\r\n  }\r\n\r\n  if (name === 'vastavirta') events = events.slice(0, 10)\r\n  if (name === 'dogs_home' || name === 'maanalainen') return null\r\n  const cleanedName = `${name.charAt(0).toUpperCase()}${name.slice(1)}`.replace(/_/g, ' ')\r\n\r\n  return (\r\n    <CollapsibleItem\r\n      header={`${cleanedName} (${events.length})`}\r\n      onSelect={onTitleClick}\r\n    >\r\n      <span className=\"sub-header\">Tarkemmat tiedot&nbsp;<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a></span><br /><br />\r\n      <ul>\r\n        {events.map((event, i) => {\r\n          const date = new Date(event.startTimeStamp)\r\n          const dateParsed = `${event.preStartTimeStamp || ''}${date.getDate()}.${date.getMonth() + 1}`\r\n          const emdash = '—'.padStart(10 - dateParsed.length).padEnd(15 - dateParsed.length)\r\n          return (\r\n            <li key={i}>\r\n              {`${dateParsed} ${emdash} ${event.event}`}\r\n            </li>\r\n          )\r\n        }\r\n        )}\r\n      </ul>\r\n    </CollapsibleItem>\r\n  )\r\n}\r\n\r\nexport default Event\r\n","import React from 'react'\r\nimport { Modal, Button } from 'react-materialize'\r\n\r\nconst About = () => {\r\n\r\n  return (\r\n    <Modal\r\n      header=\"Pispalan tapahtumat\"\r\n      actions={<Button\r\n        waves=\"green\" modal=\"close\"\r\n      >Sulje</Button>}\r\n      trigger={<Button style={{\r\n        top: '10px',\r\n        left: '10px',\r\n        position: 'absolute'\r\n        }}\r\n        title=\"Info\"\r\n        >?</Button>}>\r\n      <p>\r\n        Pispalassa on paljon pieniä eri yhdistyksiä, jotka järjestävät kaikenlaisia mukavia tapahtumia ja tekemisiä.\r\n      </p>\r\n      <p>\r\n        Tämä on pieni yritys koota kaikki samalle sivustolle, jotta olisi helpompi löytää mitä ja missä milloinkin tapahtuu.\r\n      </p>\r\n      <p>\r\n        Rajaportin sauna ja pispalan kirjasto työn alla...\r\n      </p>\r\n      <p>\r\n        Jos sivulta löytyy virheitä tai on jotain muuta valitettavaa tai haluat ehdottaa jotain paikkaa listalle, sähköpostia voi lähettää osoitteeseen fraasi.gh@gmail.com\r\n      </p>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default About","import React, { useState, useEffect } from 'react'\r\nimport { Preloader, Collapsible, Switch } from 'react-materialize'\r\nimport Event from './components/Event'\r\nimport About from './components/About'\r\nimport './App.css'\r\n\r\nimport { Stitch, RemoteMongoClient, AnonymousCredential } from 'mongodb-stitch-browser-sdk'\r\n\r\nconst client = Stitch.initializeDefaultAppClient('tapahtumat-api-lffsa')\r\nconst db = client.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas').db('tapahtumat')\r\n\r\nfunction App() {\r\n\r\n  const [data, setData] = useState(null)\r\n  const [errorMsg, setErrorMsg] = useState(null)\r\n  const [expanded, setExpanded] = useState(false)\r\n\r\n  useEffect(() => {\r\n    document.querySelector('.switch').title = 'Avaa/sulje kaikki'\r\n    client.auth.loginWithCredential(new AnonymousCredential())\r\n      .then(user => {\r\n        return db.collection('pispala').find({}, { data: 1, _id: 0 }).asArray()\r\n      }\r\n      ).then(docs => {\r\n        const returnData = docs[0].data.sort((first, second) => first.name < second.name ? -1 : 1)\r\n        setData(() => returnData)\r\n        console.log('data', returnData)\r\n      }).catch(err => {\r\n        console.error('error', err)\r\n        setErrorMsg(() => err)\r\n      })\r\n  }, [])\r\n\r\n  const onSwitchChange = () => {\r\n    setExpanded(prev => !prev)\r\n    if (expanded) document.querySelector('.collapsible.expandable').M_Collapsible.close()\r\n    else document.querySelector('.collapsible.expandable').M_Collapsible.open()\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <About />\r\n      <Switch\r\n        offLabel=\"\"\r\n        onLabel=\"\"\r\n        onChange={onSwitchChange}\r\n      />\r\n      <header className=\"App-header\">Pispalan Tapahtumat</header>\r\n      {\r\n        errorMsg !== null\r\n          ? (<div className=\"error-loader\">{errorMsg.toString()}</div>)\r\n          : data === null\r\n            ? (<div className=\"error-loader\">\r\n                Haetaan tapahtumia...<br /><br />\r\n                <Preloader size=\"small\" flashing />\r\n              </div>)\r\n            : (<Collapsible accordion={false} >\r\n                {\r\n                  data.map((el, i) => {\r\n                    return <Event data={el} key={el.name}></Event>\r\n                  })\r\n                }\r\n              </Collapsible>)\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}